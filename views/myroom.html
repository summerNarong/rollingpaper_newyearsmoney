{% extends 'layout.html' %} {% block content %} {% if user and user.ref %}

<div class="subtitle">
  <text>{{hostuser.nick}}님 통장에는 {{hostuser.asset}}원이 있습니다.</text>
</div>
{% else %}
<div class="subtitle">
  <text>{{hostuser.nick}}님께 투자하고 메세지를 전달해보세요!</text>
</div>
{% endif %}
<div class="carousel">
  <div style="--swiper-navigation-color: #86826b" class="swiper mySwiper">
    <div class="swiper-wrapper">
      <div class="swiper-slide">
        <div class="image-wrap">
          <img class="slideimg" src="/openedpassbank1.png" />
          <div class="item-wrap">
            <div class="profile">
              <span class="item-name">
                <text>{{hostuser.nick}}</text>
              </span>
              <span class="item-asset">
                <text>{{hostuser.asset}}</text>
              </span>
              <span class="item-ref">
                <text>{{hostuser.ref}}</text>
              </span>
              <span class="item-date">
                <text>{{date}}</text>
              </span>
            </div>

            {% for item in msg %} {% if loop.index0 >= 0 and loop.index0 <= 6 %}
            <div class="item-list">
              <div class="item-no">
                <text>{{loop.index0+1}}</text>
              </div>
              <div class="item-sender">
                <text>{{item.sender}}</text>
              </div>
              <div class="item-deposit">
                <text>입금</text>
              </div>
              <div class="item-price">
                <text>{{item.Image.price}}</text>
              </div>
              <div class="item-memo">
                <button class="showup">{{item.textmsg}}</button>
              </div>
            </div>
            {% if loop.index0==6 or loop.last %}
          </div>
        </div>
      </div>
      {% endif %} {% elif loop.index0 >=7 %} {% if loop.index0 % 14 == 7 %}
      <div class="swiper-slide">
        <div class="image-wrap">
          <img class="slideimg" src="/openedpassbank2.png" />
          <div class="item-wrap">
            {% endif %} {% if loop.index0 % 14 != 0 %}
            <div class="item-list2">
              <div class="item-no">
                <text>{{loop.index0+1}}</text>
              </div>
              <div class="item-sender">
                <text>{{item.sender}}</text>
              </div>
              <div class="item-deposit">
                <text>입금</text>
              </div>
              <div class="item-price">
                <text>{{item.Image.price}}</text>
              </div>
              <div class="item-memo">
                <button class="showup">{{item.textmsg}}</button>
              </div>
            </div>

            {% elif loop.index0 % 14 == 0 %}
            <div class="item-list2" style="margin-top: 18%">
              <div class="item-no">
                <text>{{loop.index0+1}}</text>
              </div>
              <div class="item-sender">
                <text>{{item.sender}}</text>
              </div>
              <div class="item-deposit">
                <text>입금</text>
              </div>
              <div class="item-price">
                <text>{{item.Image.price}}</text>
              </div>
              <div class="item-memo">
                <button class="showup">{{item.textmsg}}</button>
              </div>
            </div>
            {% endif %} {% if loop.index0 % 14 == 20 or loop.last%}
          </div>
        </div>
      </div>

      {% endif %} {% endif %}

      <div class="background">
        <div class="window">
          <div class="popup">
            <div class="close"></div>
            <div class="memo-content">{{item.textmsg}}</div>
          </div>
        </div>
      </div>

      {% endfor %}
    </div>

    <div class="swiper-button-prev"></div>
    <div class="swiper-button-next"></div>
  </div>
</div>
{% if user and user.ref %}
<a style="cursor: pointer" onclick="copytext()">
  <button class="button-56" role="button">
    <text> 내 계좌번호 복사하기 </text>
  </button>
  <!-- 내 저금통 주소 복사하기 -->
</a>
{% else %}

<a style="cursor: pointer" href="{{url}}">
  <button class="button-56" role="button">
    <text> 입금하러 가기 </text>
  </button>
</a>

{% endif %} {% endblock %} {% block script %}

<script>
  function copytext() {
    const t = document.createElement('textarea');
    document.body.appendChild(t);
    url = window.document.location.href;
    t.value = url;
    t.select();
    document.execCommand('copy');
    document.body.removeChild(t);
    alert('복사되었습니다.');
  }
</script>

<script>
  var shows = document.getElementsByClassName('showup');
  var closes = document.getElementsByClassName('close');
  var backgrounds = document.getElementsByClassName('background');
  function show() {
    document.querySelector('.background').className = 'background show';
  }

  function close() {
    document.querySelector('.background').className = 'background';
  }

  for (var i = 1; i < shows.length; i++) {
    shows[i].onclick = function (e) {
      e.preventDefault();

      //shows[2].addEventListener('click', show);
      var background1 = backgrounds.item(i - 1);
      background1.className = 'background show';
    };
  }

  // When the user clicks on <span> (x), close the modal
  for (var i = 0; i < closes.length; i++) {
    closes[i].onclick = function () {
      //closes[2].addEventListener('click', close);
      backgrounds[i].className = 'background';
    };
  }
</script>

<script src="https://unpkg.com/swiper@8/swiper-bundle.min.js"></script>
<script>
  const swiper = new Swiper('.mySwiper', {
    navigation: {
      nextEl: '.swiper-button-next',
      prevEl: '.swiper-button-prev',
    },
    centeredSlides: true,
  });
</script>
{% endblock %}
